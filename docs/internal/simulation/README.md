<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# simulation

```go
import "github.com/harrydayexe/AirportCapacityCalculator/internal/simulation"
```

The package simulation defines the Simulation interface for running simulations.

## Index

- [Constants](<#constants>)
- [type Engine](<#Engine>)
  - [func NewEngine\(logger \*slog.Logger\) \*Engine](<#NewEngine>)
  - [func \(e \*Engine\) Calculate\(ctx context.Context, world \*World\) \(float32, error\)](<#Engine.Calculate>)
- [type MaintenanceSchedule](<#MaintenanceSchedule>)
- [type Policy](<#Policy>)
- [type PreSimulationPlugin](<#PreSimulationPlugin>)
- [type RotationStrategy](<#RotationStrategy>)
- [type RunwayState](<#RunwayState>)
- [type Simulation](<#Simulation>)
  - [func NewSimulation\(airport airport.Airport, logger \*slog.Logger\) \*Simulation](<#NewSimulation>)
  - [func \(s \*Simulation\) AddCurfewPolicy\(startTime, endTime time.Time\) \(\*Simulation, error\)](<#Simulation.AddCurfewPolicy>)
  - [func \(s \*Simulation\) AddMaintenancePolicy\(schedule MaintenanceSchedule\) \*Simulation](<#Simulation.AddMaintenancePolicy>)
  - [func \(s \*Simulation\) AddPolicy\(policy Policy\) \*Simulation](<#Simulation.AddPolicy>)
  - [func \(s \*Simulation\) AddPreSimulationPlugin\(plugin PreSimulationPlugin\) \*Simulation](<#Simulation.AddPreSimulationPlugin>)
  - [func \(s \*Simulation\) Run\(ctx context.Context\) \(float32, error\)](<#Simulation.Run>)
  - [func \(s \*Simulation\) RunwayRotationPolicy\(strategy RotationStrategy\) \*Simulation](<#Simulation.RunwayRotationPolicy>)
- [type World](<#World>)
  - [func NewWorld\(airport airport.Airport, startTime, endTime time.Time\) \*World](<#NewWorld>)
  - [func \(w \*World\) CountAvailableRunways\(\) int](<#World.CountAvailableRunways>)
  - [func \(w \*World\) GetAvailableRunways\(\) \[\]airport.Runway](<#World.GetAvailableRunways>)
  - [func \(w \*World\) GetCurfewActive\(\) bool](<#World.GetCurfewActive>)
  - [func \(w \*World\) GetEndTime\(\) time.Time](<#World.GetEndTime>)
  - [func \(w \*World\) GetEventQueue\(\) \*event.EventQueue](<#World.GetEventQueue>)
  - [func \(w \*World\) GetRotationMultiplier\(\) float32](<#World.GetRotationMultiplier>)
  - [func \(w \*World\) GetRunwayAvailable\(runwayID string\) \(bool, error\)](<#World.GetRunwayAvailable>)
  - [func \(w \*World\) GetRunwayIDs\(\) \[\]string](<#World.GetRunwayIDs>)
  - [func \(w \*World\) GetStartTime\(\) time.Time](<#World.GetStartTime>)
  - [func \(w \*World\) ScheduleEvent\(evt event.Event\)](<#World.ScheduleEvent>)
  - [func \(w \*World\) SetCurfewActive\(active bool\)](<#World.SetCurfewActive>)
  - [func \(w \*World\) SetRotationMultiplier\(multiplier float32\)](<#World.SetRotationMultiplier>)
  - [func \(w \*World\) SetRunwayAvailable\(runwayID string, available bool\) error](<#World.SetRunwayAvailable>)


## Constants

<a name="HoursPerDay"></a>

```go
const (

    // HoursPerDay represents the number of hours in a day
    HoursPerDay = 24

    // DaysPerYear represents the number of days in a standard year
    DaysPerYear = 365

    // HoursPerYear represents the total operating hours in a full year (365 days * 24 hours)
    // This is used as the default for 24/7 airport operations
    HoursPerYear = DaysPerYear * HoursPerDay // 8760 hours

    // SecondsPerHour represents the number of seconds in an hour
    SecondsPerHour = 3600
)
```

<a name="NoRotation"></a>Rotation strategy constants

```go
const (
    NoRotation             = policy.NoRotation
    TimeBasedRotation      = policy.TimeBasedRotation
    BalancedRotation       = policy.BalancedRotation
    NoiseOptimizedRotation = policy.NoiseOptimizedRotation
)
```

<a name="YearDuration"></a>YearDuration represents the duration of a standard year

```go
const YearDuration = DaysPerYear * HoursPerDay * time.Hour
```

<a name="Engine"></a>
## type [Engine](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/engine.go#L11-L13>)

Engine is the core event\-driven simulation engine that calculates total movements by processing events chronologically and calculating capacity for each time window.

```go
type Engine struct {
    // contains filtered or unexported fields
}
```

<a name="NewEngine"></a>
### func [NewEngine](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/engine.go#L16>)

```go
func NewEngine(logger *slog.Logger) *Engine
```

NewEngine creates a new simulation engine.

<a name="Engine.Calculate"></a>
### func \(\*Engine\) [Calculate](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/engine.go#L24>)

```go
func (e *Engine) Calculate(ctx context.Context, world *World) (float32, error)
```

Calculate computes total annual movements using event\-driven state\-window approach. This method processes events chronologically and calculates capacity for each time window.

<a name="MaintenanceSchedule"></a>
## type [MaintenanceSchedule](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L26>)

Type aliases for convenience \- expose policy package types

```go
type MaintenanceSchedule = policy.MaintenanceSchedule
```

<a name="Policy"></a>
## type [Policy](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L19-L22>)

Policy defines a runtime policy that generates events for the event\-driven simulation.

```go
type Policy interface {
    Name() string
    GenerateEvents(ctx context.Context, world policy.EventWorld) error
}
```

<a name="PreSimulationPlugin"></a>
## type [PreSimulationPlugin](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L14-L16>)

PreSimulationPlugin defines a plugin that modifies the airport configuration before the simulation runs.

```go
type PreSimulationPlugin interface {
    Apply(airport.Airport) airport.Airport
}
```

<a name="RotationStrategy"></a>
## type [RotationStrategy](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L27>)

Type aliases for convenience \- expose policy package types

```go
type RotationStrategy = policy.RotationStrategy
```

<a name="RunwayState"></a>
## type [RunwayState](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L32-L35>)

RunwayState tracks a single runway's availability and operational parameters.

```go
type RunwayState struct {
    Runway    airport.Runway
    Available bool
}
```

<a name="Simulation"></a>
## type [Simulation](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L39-L44>)

Simulation represents an event\-driven simulation that can be run.

```go
type Simulation struct {
    // contains filtered or unexported fields
}
```

<a name="NewSimulation"></a>
### func [NewSimulation](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L47>)

```go
func NewSimulation(airport airport.Airport, logger *slog.Logger) *Simulation
```

NewSimulation creates a new Simulation instance.

<a name="Simulation.AddCurfewPolicy"></a>
### func \(\*Simulation\) [AddCurfewPolicy](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L107>)

```go
func (s *Simulation) AddCurfewPolicy(startTime, endTime time.Time) (*Simulation, error)
```

AddCurfewPolicy adds a curfew policy that restricts airport operations during specified hours. Returns an error if the curfew time range is invalid.

<a name="Simulation.AddMaintenancePolicy"></a>
### func \(\*Simulation\) [AddMaintenancePolicy](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L116>)

```go
func (s *Simulation) AddMaintenancePolicy(schedule MaintenanceSchedule) *Simulation
```

AddMaintenancePolicy adds a maintenance policy that schedules runway maintenance.

<a name="Simulation.AddPolicy"></a>
### func \(\*Simulation\) [AddPolicy](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L100>)

```go
func (s *Simulation) AddPolicy(policy Policy) *Simulation
```

AddPolicy adds a runtime policy to the simulation.

<a name="Simulation.AddPreSimulationPlugin"></a>
### func \(\*Simulation\) [AddPreSimulationPlugin](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L57>)

```go
func (s *Simulation) AddPreSimulationPlugin(plugin PreSimulationPlugin) *Simulation
```

AddPreSimulationPlugin adds a pre\-simulation plugin to the simulation.

<a name="Simulation.Run"></a>
### func \(\*Simulation\) [Run](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L63>)

```go
func (s *Simulation) Run(ctx context.Context) (float32, error)
```

Run executes the event\-driven simulation.

<a name="Simulation.RunwayRotationPolicy"></a>
### func \(\*Simulation\) [RunwayRotationPolicy](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/simulation.go#L122>)

```go
func (s *Simulation) RunwayRotationPolicy(strategy RotationStrategy) *Simulation
```

RunwayRotationPolicy adds a runway rotation policy that implements rotation strategies.

<a name="World"></a>
## type [World](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L13-L29>)

World represents the complete state of the simulation at any point in time. It tracks runway availability, curfew status, and rotation efficiency.

```go
type World struct {
    Airport     airport.Airport
    StartTime   time.Time
    EndTime     time.Time
    CurrentTime time.Time

    // Event queue for chronological processing
    Events *event.EventQueue

    // System state
    RunwayStates       map[string]*RunwayState
    CurfewActive       bool
    RotationMultiplier float32

    // Statistics
    TotalCapacity float32
}
```

<a name="NewWorld"></a>
### func [NewWorld](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L38>)

```go
func NewWorld(airport airport.Airport, startTime, endTime time.Time) *World
```

NewWorld creates a new simulation world initialized with an airport.

<a name="World.CountAvailableRunways"></a>
### func \(\*World\) [CountAvailableRunways](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L119>)

```go
func (w *World) CountAvailableRunways() int
```

CountAvailableRunways returns the number of currently available runways.

<a name="World.GetAvailableRunways"></a>
### func \(\*World\) [GetAvailableRunways](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L106>)

```go
func (w *World) GetAvailableRunways() []airport.Runway
```

GetAvailableRunways returns a slice of currently available runways.

<a name="World.GetCurfewActive"></a>
### func \(\*World\) [GetCurfewActive](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L70>)

```go
func (w *World) GetCurfewActive() bool
```

GetCurfewActive returns whether curfew is currently active.

<a name="World.GetEndTime"></a>
### func \(\*World\) [GetEndTime](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L147>)

```go
func (w *World) GetEndTime() time.Time
```

GetEndTime returns the simulation end time.

<a name="World.GetEventQueue"></a>
### func \(\*World\) [GetEventQueue](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L137>)

```go
func (w *World) GetEventQueue() *event.EventQueue
```

GetEventQueue returns the event queue.

<a name="World.GetRotationMultiplier"></a>
### func \(\*World\) [GetRotationMultiplier](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L101>)

```go
func (w *World) GetRotationMultiplier() float32
```

GetRotationMultiplier returns the current rotation efficiency multiplier.

<a name="World.GetRunwayAvailable"></a>
### func \(\*World\) [GetRunwayAvailable](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L86>)

```go
func (w *World) GetRunwayAvailable(runwayID string) (bool, error)
```

GetRunwayAvailable checks if a runway is currently available.

<a name="World.GetRunwayIDs"></a>
### func \(\*World\) [GetRunwayIDs](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L152>)

```go
func (w *World) GetRunwayIDs() []string
```

GetRunwayIDs returns a list of all runway IDs.

<a name="World.GetStartTime"></a>
### func \(\*World\) [GetStartTime](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L142>)

```go
func (w *World) GetStartTime() time.Time
```

GetStartTime returns the simulation start time.

<a name="World.ScheduleEvent"></a>
### func \(\*World\) [ScheduleEvent](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L132>)

```go
func (w *World) ScheduleEvent(evt event.Event)
```

ScheduleEvent adds an event to the event queue.

<a name="World.SetCurfewActive"></a>
### func \(\*World\) [SetCurfewActive](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L65>)

```go
func (w *World) SetCurfewActive(active bool)
```

SetCurfewActive sets whether curfew is currently active.

<a name="World.SetRotationMultiplier"></a>
### func \(\*World\) [SetRotationMultiplier](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L96>)

```go
func (w *World) SetRotationMultiplier(multiplier float32)
```

SetRotationMultiplier sets the current rotation efficiency multiplier.

<a name="World.SetRunwayAvailable"></a>
### func \(\*World\) [SetRunwayAvailable](<https://github.com/harrydayexe/AirportCapacityCalculator/blob/main/internal/simulation/world.go#L75>)

```go
func (w *World) SetRunwayAvailable(runwayID string, available bool) error
```

SetRunwayAvailable marks a runway as available or unavailable.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
